
<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Dessin - Un seul trait</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; margin: 20px; }
        canvas { border: 1px solid #ccc; cursor: crosshair; margin-top: 10px; }
        .controls { margin: 10px; }
        #saveBtn, #resetBtn { display: none; margin: 10px; }
        #theme { font-size: 1.2em; margin: 10px; font-weight: bold; }
    </style>
</head>
<body>
    <h1>Dessine un seul trait</h1>
    <div class="controls">
        <button onclick="generateTheme()">ðŸŽ² Choisir un thÃ¨me</button>
        <div id="theme"></div>
        <label>Couleur : <input type="color" id="colorPicker" value="#000000"></label>
        <label>Ã‰paisseur : <input type="range" id="thickness" min="1" max="20" value="5"></label>
        <label>Texture :
            <select id="texture">
                <option value="solid">Lisse</option>
                <option value="dotted">PointillÃ©</option>
                <option value="dashed">Tirets</option>
            </select>
        </label>
    </div>
    <canvas id="drawingCanvas" width="600" height="400"></canvas>
    <div>
        <button id="saveBtn" onclick="saveDrawing()">ðŸ’¾ Enregistrer</button>
        <button id="resetBtn" onclick="resetCanvas()">ðŸ”„ Recommencer</button>
    </div>

    <script>
        const canvas = document.getElementById('drawingCanvas');
        const ctx = canvas.getContext('2d');
        const colorPicker = document.getElementById('colorPicker');
        const thickness = document.getElementById('thickness');
        const texture = document.getElementById('texture');
        const saveBtn = document.getElementById('saveBtn');
        const resetBtn = document.getElementById('resetBtn');
        let drawing = false;
        let hasDrawn = false;

        canvas.addEventListener('mousedown', (e) => {
            if (hasDrawn) return;
            drawing = true;
            ctx.beginPath();
            ctx.moveTo(e.offsetX, e.offsetY);
        });

        canvas.addEventListener('mousemove', (e) => {
            if (!drawing || hasDrawn) return;
            ctx.lineTo(e.offsetX, e.offsetY);
            ctx.strokeStyle = colorPicker.value;
            ctx.lineWidth = thickness.value;
            if (texture.value === 'dotted') {
                ctx.setLineDash([2, 10]);
            } else if (texture.value === 'dashed') {
                ctx.setLineDash([10, 10]);
            } else {
                ctx.setLineDash([]);
            }
            ctx.stroke();
        });

        canvas.addEventListener('mouseup', () => {
            if (!drawing || hasDrawn) return;
            drawing = false;
            hasDrawn = true;
            saveBtn.style.display = 'inline-block';
            resetBtn.style.display = 'inline-block';
        });

        function saveDrawing() {
            const link = document.createElement('a');
            link.download = 'dessin.png';
            link.href = canvas.toDataURL();
            link.click();
        }

        function resetCanvas() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            hasDrawn = false;
            saveBtn.style.display = 'none';
            resetBtn.style.display = 'none';
        }

        function generateTheme() {
            const themes = ["famille", "Ã©lÃ©phant", "cuisine", "robot", "amour", "montagne", "musique", "forÃªt", "ville", "rÃªve", "fantÃ´me", "aventure", "magie", "plage", "hiver", "fleur", "oiseau", "vÃ©lo", "chÃ¢teau", "nuage"];
            const randomTheme = themes[Math.floor(Math.random() * themes.length)];
            document.getElementById('theme').textContent = "ThÃ¨me : " + randomTheme;
        }
    </script>
</body>
</html>
